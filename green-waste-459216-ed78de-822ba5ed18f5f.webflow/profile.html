<!DOCTYPE html><!--  This site was created in Webflow. https://www.webflow.com  -->
<!--  Last Published: Thu Feb 16 2023 20:15:41 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="63e534fd4f333d0a90139adf" data-wf-site="63e534fd4f333d4f7f139aa2">
<head>
  <meta charset="utf-8">
  <title>Create Request</title>
  <meta content="Create Request" property="og:title">
  <meta content="Create Request" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/green-waste-459216-ed78de-822ba5ed18f5f.webflow.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["Montserrat:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic","Merriweather:300,300italic,400,400italic,700,700italic,900,900italic"]  }});</script>
  <!-- [if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif] -->
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon">
  <link href="images/webclip.png" rel="apple-touch-icon">
</head>
<body class="body-11">
  <div data-collapse="medium" data-animation="over-left" data-duration="400" data-easing="linear" data-easing2="ease-in" role="banner" class="navigation w-nav">
    <div class="navigation-wrap">
      <a href="index.html" class="logo-link w-nav-brand">Green Waste </a>
      <a id="spSignOut" href="#" class="button-53 _12333 w-button">Sign Out</a>
      <div class="menu">
        <nav role="navigation" class="navigation-items w-nav-menu">
          <a id="About" href="#" class="navigation-item w-nav-link">About us</a>
          <a href="index.html" class="navigation-item w-nav-link">Services</a>
        </nav>
      </div>
    </div>
  </div>
  <div style="display:none" class="modal1">
    <div data-w-id="41a00ce4-70a4-09b3-e910-b56e9040a3c4" class="modal-bag"></div>
    <div class="modal-contain">
      <a data-w-id="7aef7528-8887-3caf-d086-dbbf3c15e5c6" href="#" class="link-block-2 w-inline-block">
        <div class="close-text">+</div>
      </a>
      <h3>Place your request down below</h3>
      <div class="w-form">
        <form id="email-form-2" name="email-form-2" data-name="Email Form 2" method="get"><label for="factoryloc">Factory location</label><input type="text" class="text-field-39 w-input" maxlength="256" name="field" data-name="Field" placeholder="Example Text" id="factoryloc" required=""><label for="email" class="field-label-40">Quantity in tons</label>
          <div class="fs_inputcounter-1_component-2">
            <div class="fs_inputcounter-1_embed-2 w-embed w-script">
              <!--  [Finsweet Attributes] Input Counter  -->
              <script>(()=>{var t="https://cdn.jsdelivr.net/npm/@finsweet/attributes-inputcounter@1/inputcounter.js",e=document.querySelector(`script[src="${t}"]`);e||(e=document.createElement("script"),e.async=!0,e.src=t,document.head.append(e));})();</script>
            </div>
            <div class="fs_inputcounter-1_wrapper-2"><input type="text" fs-inputcounter-element="input" class="fs_inputcounter-1_input-2 w-input" fs-inputcounter-initial="0" maxlength="256" name="Counter" data-name="Counter" placeholder="" id="fs-inputcounter-1-input" required="">
              <div aria-controls="fs-inputcounter-1-input" fs-inputcounter-element="decrement" role="button" aria-label="Decrement input value" tabindex="0" class="fs_inputcounter-1_button-2">
                <div>-</div>
              </div>
              <div aria-controls="fs-inputcounter-1-input" fs-inputcounter-element="increment" role="button" aria-label="Increment input value" tabindex="0" class="fs_inputcounter-1_button-2">
                <div>+</div>
              </div>
            </div>
          </div><input type="submit" id="reqbutton" value="Submit" data-wait="Please wait..." class="button w-button">
        </form>
        <div class="w-form-done">
          <div>Thank you! Your request has been placed!<br>you can check it in the order section</div>
          <a href="company-orders.html" class="link-23">here</a>
        </div>
        <div class="error-message-5 w-form-fail">
          <div class="text-block-41">thank you! Your request has been placed!<br>you can check it in the order section</div>
          <a href="company-orders.html" class="link-21">here</a>
        </div>
      </div>
    </div>
  </div>
  <div class="section cc-store-home-wrap">
    <div class="container">
      <div class="motto-wrap-2">
        <div class="heading-jumbo-small-2">How can we help you?<br></div>
      </div>
    </div>
  </div>
  <a href="marketplace-2.html" class="button-45 w-button">Marketplace</a>
  <div class="div-block-31">
    <div class="text-block-39">Description:</div>
    <p id="desc" class="paragraph-7"></p>
  </div>
  <div class="section api-content">
    <div id="Item-Container" class="container gggg">
      <a href="#" data-w-id="60e3f5e3-b141-3efa-e573-7f1ee8386621" class="button-29 _555 w-button">Place Request</a>
      <div id="samplestyle" class="item">
        <h1 id="H1" class="heading-5"></h1>
        <h6 id="hh" class="heading-46"></h6>
        <div id="special"></div><img src="images/Sage-Green-Aesthetic-Wallpaper-6.png" srcset="images/Sage-Green-Aesthetic-Wallpaper-6-p-500.png 500w, images/Sage-Green-Aesthetic-Wallpaper-6-p-800.png 800w, images/Sage-Green-Aesthetic-Wallpaper-6-p-1080.png 1080w, images/Sage-Green-Aesthetic-Wallpaper-6-p-1600.png 1600w, images/Sage-Green-Aesthetic-Wallpaper-6.png 1920w" sizes="(max-width: 479px) 88vw, 400px" alt="" class="image-16">
        <p id="P"></p>
      </div>
    </div>
  </div>
  <div class="section-15 wf-section"></div>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=63e534fd4f333d4f7f139aa2" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="js/webflow.js" type="text/javascript"></script>
  <!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
  <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-firestore.js"> </script>
  <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-storage.js"> </script>
  <script src="./Profile_files/jquery-3.5.1.min.dc5e7f18c8.js.download" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="./Profile_files/webflow.0d83753e7.js.download" type="text/javascript"></script>
  <!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
  <script src="./Profile_files/jquery-3.6.3.js.download"></script>
  <!--  Adding Driver's Information  -->
  <script type="module">
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.1.1/firebase-app.js";
    import { getFirestore } from "https://www.gstatic.com/firebasejs/9.1.1/firebase-firestore.js"
    import { collection, doc, getDoc, getDocs, addDoc, Timestamp } from "https://www.gstatic.com/firebasejs/9.1.1/firebase-firestore.js"
    import { query, orderBy, limit, where, onSnapshot } from "https://www.gstatic.com/firebasejs/9.1.1/firebase-firestore.js"
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.1.1/firebase-auth.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
var spName;
var spdesc;
var loginedUserEmail;
var companyName;
var sploc;
var spEmail;
    // Your web app's Firebase configuration
    const firebaseConfig = {
        apiKey: "AIzaSyDGrZtDS9lBiOA-KZIB61CC43KL2yEKlkk",
        authDomain: "green-waste-1d4dc.firebaseapp.com",
        databaseURL: "https://green-waste-1d4dc-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "green-waste-1d4dc",
        storageBucket: "green-waste-1d4dc.appspot.com",
        messagingSenderId: "465078550816",
        appId: "1:465078550816:web:54428ca9c48db03b99d745",
        measurementId: "G-YWHBNXLJVC"
    };
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    var myUrl = new URL(document.location.href);
    var myParam = myUrl.searchParams.get("id") || 1;
const auth = getAuth();
var speciality;
onAuthStateChanged(auth, (user) => {
  if (user) {
    loginedUserEmail = user.email;
    loadCompanyInfo();
  } else {
    // User is signed out
    // ...
    console.log("no user found");
  }
});
//request
    var reqbutton = document.getElementById("reqbutton");
    reqbutton.addEventListener('click', async () => {
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
        reqbutton.style.display = 'none';
       await addDoc(collection(db, "order"), {
       			sp_name:spName,
            sp_email:spEmail,
            SP_Location:sploc,
            Company_name:companyName,
            order_status:'',
            waste_type:speciality,
            requestor_email:loginedUserEmail,
					//  waste_type: document.getElementById("reqwastetype").value,
            waste_qauntity: document.getElementById("fs-inputcounter-1-input").value,
            order_id: new Date().getTime()
				});
    });  //end of addEventListener
    const docRef = doc(db, "serviceProviders", myParam);
    const docSnap = await getDoc(docRef);
    if (docSnap.exists()) {
        const itemContainer = document.getElementById("Item-Container");
        const item = document.getElementById('samplestyle');
        const h1 = item.getElementsByTagName('H1')[0];
        const p = item.getElementsByTagName('P')[0];
        h1.textContent = docSnap.data().SP_name;
        spName = docSnap.data().SP_name;
        spEmail= docSnap.data().SP_email;
        sploc = docSnap.data().SP_Location;
        p.textContent = sploc;
        speciality=docSnap.data().SP_Speciality;
        document.getElementById('desc').innerHTML=docSnap.data().SP_description;
        document.getElementById('hh').innerHTML=docSnap.data().SP_Speciality;
        // Limit to 240 chars
        itemContainer.appendChild(item);
    } else {
        // doc.data() will be undefined in this case
        alert("invalid request!");
    }
async function loadCompanyInfo(){
    const docRef1 = query(collection(db, "Company"), where("comp_email", "==", loginedUserEmail));
    const querySnapshot = await getDocs(docRef1);
		querySnapshot.forEach((doc) => {
 			 companyName=doc.data().comp_name;
		});
}
document.getElementById("spSignOut").addEventListener("click", signoutUser);
    async function signoutUser() {
      signOut(auth).then(() => {
        // Sign-out 
        window.location.href = 'https://green-waste-459216-ed78de-822ba5ed18f5f.webflow.io/';
      }).catch((error) => {
        // An error happened.
        window.location.href = 'https://green-waste-459216-ed78de-822ba5ed18f5f.webflow.io/';
      });
    }
</script>
</body>
</html>